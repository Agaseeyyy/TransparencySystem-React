import profile from "../assets/profile.webp"
import { useAuth } from "../context/AuthProvider"
import { Link, useLocation } from "react-router-dom"

const Sidebar = ({ collapsed }) => {
  const { user, isAuthenticated, logout } = useAuth()
  const location = useLocation()

  const handleLogout = () => {
    isAuthenticated && logout()
  }

  const menuList = [
    {
      title: "Dashboard",
      path: "/dashboard",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 22 21"
        >
          <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z" />
          <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z" />
        </svg>
      ),
    },
    {
      title: "Payments",
      path: "/payments",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M1 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4Zm12 4a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM1.75 14.5a.75.75 0 0 0 0 1.5c4.417 0 8.693.603 12.749 1.73 1.111.309 2.251-.512 2.251-1.696v-.784a.75.75 0 0 0-1.5 0v.784a.272.272 0 0 1-.35.25A49.043 49.043 0 0 0 1.75 14.5Z"
            clipRule="evenodd"
          />
        </svg>
      ),
    },
    {
      title: "Students",
      path: "/students",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 18 18"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M9.664 1.319a.75.75 0 0 1 .672 0 41.059 41.059 0 0 1 8.198 5.424.75.75 0 0 1-.254 1.285 31.372 31.372 0 0 0-7.86 3.83.75.75 0 0 1-.84 0 31.508 31.508 0 0 0-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 0 1 3.305-2.033.75.75 0 0 0-.714-1.319 37 37 0 0 0-3.446 2.12A2.216 2.216 0 0 0 6 9.393v.38a31.293 31.293 0 0 0-4.28-1.746.75.75 0 0 1-.254-1.285 41.059 41.059 0 0 1 8.198-5.424ZM6 11.459a29.848 29.848 0 0 0-2.455-1.158 41.029 41.029 0 0 0-.39 3.114.75.75 0 0 0 .419.74c.528.256 1.046.53 1.554.82-.21.324-.455.63-.739.914a.75.75 0 1 0 1.06 1.06c.37-.369.69-.77.96-1.193a26.61 26.61 0 0 1 3.095 2.348.75.75 0 0 0 .992 0 26.547 26.547 0 0 1 5.93-3.95.75.75 0 0 0 .42-.739 41.053 41.053 0 0 0-.39-3.114 29.925 29.925 0 0 0-5.199 2.801 2.25 2.25 0 0 1-2.514 0c-.41-.275-.826-.541-1.25-.797a6.985 6.985 0 0 1-1.084 3.45 26.503 26.503 0 0 0-1.281-.78A5.487 5.487 0 0 0 6 12v-.54Z"
            clipRule="evenodd"
          />
        </svg>
      ),
    },
    {
      title: "Remittance",
      path: "/remittance",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 18"
          fill="currentColor"
        >
          <path d="M10.75 10.818v2.614A3.13 3.13 0 0 0 11.888 13c.482-.315.612-.648.612-.875 0-.227-.13-.56-.612-.875a3.13 3.13 0 0 0-1.138-.432ZM8.33 8.62c.053.055.115.11.184.164.208.16.46.284.736.363V6.603a2.45 2.45 0 0 0-.35.13c-.14.065-.27.143-.386.233-.377.292-.514.627-.514.909 0 .184.058.39.202.592.037.051.08.102.128.152Z" />
          <path
            fillRule="evenodd"
            d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-6a.75.75 0 0 1 .75.75v.316a3.78 3.78 0 0 1 1.653.713c.426.33.744.74.925 1.2a.75.75 0 0 1-1.395.55 1.35 1.35 0 0 0-.447-.563 2.187 2.187 0 0 0-.736-.363V9.3c.698.093 1.383.32 1.959.696.787.514 1.29 1.27 1.29 2.13 0 .86-.504 1.616-1.29 2.13-.576.377-1.261.603-1.96.696v.299a.75.75 0 1 1-1.5 0v-.3c-.697-.092-1.382-.318-1.958-.695-.482-.315-.857-.717-1.078-1.188a.75.75 0 1 1 1.359-.636c.08.173.245.376.54.569.313.205.706.353 1.138.432v-2.748a3.782 3.782 0 0 1-1.653-.713C6.9 9.433 6.5 8.681 6.5 7.875c0-.805.4-1.558 1.097-2.096a3.78 3.78 0 0 1 1.653-.713V4.75A.75.75 0 0 1 10 4Z"
            clipRule="evenodd"
          />
        </svg>
      ),
    },
    {
      title: "Events",
      path: "/events",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4H5V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z"
            clipRule="evenodd"
          />
        </svg>
      ),
    },
    {
      title: "Departments",
      path: "/departments",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 18"
        >
          <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z" />
        </svg>
      ),
    },
    {
      title: "Programs",
      path: "/programs",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 18"
        >
          <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z" />
        </svg>
      ),
    },
    {
      title: "Users",
      path: "/users",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 18"
        >
          <path d="M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z" />
        </svg>
      ),
    },
    {
      title: "Settings",
      path: "/settings",
      icon: (
        <svg
          className="w-5 h-5"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fillRule="evenodd"
            d="M7.84 1.804A1 1 0 0 1 8.82 1h2.36a1 1 0 0 1 .98.804l.331 1.652a6.993 6.993 0 0 1 1.929 1.115l1.598-.54a1 1 0 0 1 1.186.447l1.18 2.044a1 1 0 0 1-.205 1.251l-1.267 1.113a7.047 7.047 0 0 1 0 2.228l1.267 1.113a1 1 0 0 1 .206 1.25l-1.18 2.045a1 1 0 0 1-1.187.447l-1.598-.54a6.993 6.993 0 0 1-1.929 1.115l-.33 1.652a1 1 0 0 1-.98.804H8.82a1 1 0 0 1-.98-.804l-.331-1.652a6.993 6.993 0 0 1-1.929-1.115l-1.598.54a1 1 0 0 1-1.186-.447l-1.18-2.044a1 1 0 0 1 .205-1.251l1.267-1.114a7.05 7.05 0 0 1 0-2.227L1.821 7.773a1 1 0 0 1-.206-1.25l1.18-2.045a1 1 0 0 1 1.187-.447l1.598.54A6.992 6.992 0 0 1 7.51 3.456l.33-1.652ZM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
            clipRule="evenodd"
          />
        </svg>
      ),
    },
  ]

  return (
    <aside
      id="logo-sidebar"
      className={`fixed top-0 left-0 z-30 h-screen transition-all duration-300 border border-red-200 ease-in-out bg-red-50 dark:bg-gray-800 ${collapsed ? "w-20" : "w-64"} max-lg:-translate-x-full`}
      aria-label="Sidebar"
    >
      <div className="flex flex-col h-full py-4 overflow-y-auto border-jpcsred">
        {/* Logo Section */}
        <a
          href="https://www.facebook.com/jpcscspc"
          className={`flex items-center ${collapsed ? "justify-center" : "px-6"} mb-6`}
        >
          <div className={`flex items-center ${collapsed ? "" : ""}`}>
            <div className={`${collapsed ? "w-8 h-8" : "mr-3 w-10 h-10"}`}>
            <img
              src="https://scontent.fmnl13-2.fna.fbcdn.net/v/t39.30808-6/352989952_643047974523812_4941044588117788236_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=a5f93a&_nc_eui2=AeFJ7pZTJHYbhZctPoH16gc3lIqKag6D6ryUiopqDoPqvBbvJgj1OKVfqIEqsRSr5zhsptB6Ny9ChXusYC-uf4x_&_nc_ohc=V-gG8iZdpycQ7kNvgE3mYsx&_nc_oc=AdgtqZ3NtqjH16vvYDp9RLa2Y4TAbObvvGg6jOX6zQXmAN7DHDrtoS9dozdQiCLCu98&_nc_zt=23&_nc_ht=scontent.fmnl13-2.fna&_nc_gid=Axuu8HmpdcwyEWW5afi6LEO&oh=00_AYDlpm5TfgCqUo28qp_cFiIcr0FGdQm9NiaUx2RXrrlIHg&oe=67C24BAD"
              className="rounded-full mr-3 sm:h-7`"
              alt="Org Logo"
            />
            </div>
            {!collapsed && (
              <span className="text-lg font-semibold text-gray-800 dark:text-white">JPCS CSPC Chapter</span>
            )}
          </div>
        </a>

        {/* Profile Section - Only show when not collapsed */}
        {isAuthenticated && (
          <div className="px-6 pb-6 mb-6 border-b border-red-200">
            <div className={`flex items-center ${collapsed ? "content-center" : ""}`}>
              <img src={profile || "/placeholder.svg"} alt="profile" className={`mr-3 rounded-full ${collapsed ? "w-8 h-8" : "w-10 h-10"}`} />
              {!collapsed && (
                <div>
                  <div className="font-medium text-gray-800">
                    {user?.lastName} {user?.firstName} {user?.middleInitial}.
                  </div>
                  <div className="text-sm text-red-600">{user?.role}</div>
                </div>
              )}
            </div>
          </div>
        )}

        {/* Menu List */}
        <div className="flex-1 px-3">
          <ul className="space-y-1">
            {menuList.map((menu) => (
              <li key={menu.title}>
                <Link
                  to={menu.path}
                  className={`flex items-center ${collapsed ? "justify-center" : "px-3"} py-2.5 rounded-lg text-sm ${
                    location.pathname === menu.path ? "bg-red-100 text-red-600" : "text-gray-600 hover:bg-gray-100"
                  }`}
                  title={collapsed ? menu.title : ""}
                >
                  <span className={`${location.pathname === menu.path ? "text-red-600" : "text-gray-500"}`}>
                    {menu.icon}
                  </span>
                  {!collapsed && <span className="ml-3">{menu.title}</span>}
                </Link>
              </li>
            ))}
          </ul>
        </div>

        {/* Logout Button */}
        <div className={`px-3 mt-6 ${collapsed ? "flex justify-center" : ""}`}>
          <button onClick={handleLogout} className={`w-full ${collapsed ? "flex justify-center" : ""}`}>
            <Link
              to="/login"
              className={`flex items-center ${collapsed ? "justify-center px-2" : "px-3"} py-2.5 text-sm text-gray-600 rounded-lg hover:bg-gray-100`}
              title={collapsed ? (isAuthenticated ? "Sign Out" : "Sign In") : ""}
            >
              <svg
                className="w-5 h-5 text-gray-500"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 18 16"
              >
                <path
                  stroke="currentColor"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"
                />
              </svg>
              {!collapsed && <span className="ml-3">{isAuthenticated ? "Sign Out" : "Sign In"}</span>}
            </Link>
          </button>
        </div>
      </div>
    </aside>
  )
}

export default Sidebar